!function(t){var e={};function i(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(s,n,function(e){return t[e]}.bind(null,n));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";function s(t){for(let e=0;e<t.length;e++){let i=parseInt(Math.random()*t.length),s=t[e];t[e]=t[i],t[i]=s}}i.r(e);function n(t,e=.97){let i,s=[];i=Math.random()<.5?(Math.random()+.1).toFixed(3):(2*Math.random()+1).toFixed(3);for(let n=0;n<parseInt(t/2);n++){let t=Math.random().toFixed(3);i>1&&(t=(Math.random()*(1/i)).toFixed(3));let n=i*t*(1/e),r=1-n,o=(Math.random()*r+n).toFixed(3);s.push([[t,o],1])}for(let n=0;n<parseInt(t/2);n++){let t=Math.random().toFixed(3),n=0,r=i*t*e,o=(Math.random()*r+n).toFixed(3);s.push([[t,o],-1])}return[i,s]}function r(t,e){s(t);for(let i=0;i<parseInt(t.length*e);i++)t[i][1]*=-1}function o(t,e){let i=[];for(let s=0;s<t.length;s++)i.push(Number(t[s])+Number(e[s]));return i}function a(t,e){let i=0;for(let s=0;s<t.length;s++)i+=t[s]*e[s];return i}function h(t){return Math.sqrt(t.reduce((function(t,e){return t+e*e}),0))}class l{constructor(t){this.weights=[0,0],this.points=t,this.weightsList=[],this.pointsList=[],this.maxIterations=Math.max(50,2*this.points.length),this.errList=[]}updateWeights(){s(this.points);for(let t=0;t<this.points.length;t++){let e=this.points[t],i=e[1];if(Math.sign(a(this.weights,e[0]))!=i)return this.weights=o(this.weights,e[0].map(t=>t*i)),this.pointsList.push(e[0]),!0}return!1}train(){for(;this.updateWeights()&&(this.weightsList.push(this.weights),this.maxIterations-=1,0!=this.maxIterations););for(let t of this.weightsList)this.errList.push(this.err(t))}predict(t,e){return Math.sign(a(e,t[0]))}err(t){let e=0;for(let i of this.points)this.predict(i,t)!==i[1]&&e++;return(e/this.points.length).toFixed(3)}}class p{constructor(t,e){this.weights=[0,0],this.points=t,this.weightsList=[],this.votesList=[],this.maxVote,this.pointsList=[],this.maxIterations=e,this.errList=[]}updateWeights(){s(this.points);let t=0;for(let e=0;e<this.points.length;e++){let i=this.points[e],s=i[1];Math.sign(a(this.weights,i[0]))!=s?(t>0&&(this.weightsList.push(this.weights),this.votesList.push(t),t=0,this.pointsList.push(i[0])),this.weights=o(this.weights,i[0].map(t=>t*s))):t+=1}}train(){for(let t=0;t<this.maxIterations;t++)this.updateWeights();this.maxVote=Math.max(...this.votesList);for(let t of this.weightsList)this.errList.push(this.err(t,!0));this.errList[this.errList.length-1]=this.err(this.weights,!1)+"(total)"}predictSimple(t,e){return Math.sign(a(e,t[0]))}predict(t){let e=0;for(let i=0;i<this.weightsList.length;i++)e+=this.votesList[i]*this.predictSimple(t,this.weightsList[i]);return Math.sign(e)}err(t,e){let i=0;for(let s of this.points){(e?this.predictSimple(s,t):this.predict(s))!==s[1]&&i++}return(i/this.points.length).toFixed(3)}}class u{constructor(t){this.points=t,this.weights=[-.1,.1],this.weightsList=[],this.pointsList=[],this.errList=[]}hopfieldVector(t){let e=[0,0];for(let i of t)e=o(e,i[0]);let i=[0,0];i[0]=1,i[1]=-e[0]/e[1];let s=h(i);return i.map((function(t){return t/s}))}updateWeights1(){let t,e=Math.pow(10,1e3);for(let i of this.points){let s=i[0].map(t=>t*i[1]),n=a(this.weights,s);n<e&&(e=n,t=s)}let i=(2-e)/(h(this.weights)**2-e),s=o(t,this.weights.map(t=>t*i));void 0!==s&&(this.weights=o(this.weights,s))}updateWeights2(){let t,e;s(this.points);for(let i of this.points){let s=i[0].map(t=>t*i[1]),n=a(this.weights,s);if(n/h(this.weights)<.1){e=n,t=s,this.pointsList.push(i[0]);break}}let i=(2-e)/(h(this.weights)**2-e),n=o(t,this.weights.map(t=>t*i));void 0!==n&&(this.weights=o(this.weights,n))}updateWeights3(){let t,e=-Math.pow(10,999);for(let i of this.points){let s=i[0].map(t=>t*i[1]),n=a(this.weights,s);n/h(this.weights)<-.15&&n>e&&(e=n,t=s)}let i=(2-e)/(h(this.weights)**2-e),s=o(t,this.weights.map(t=>t*i));void 0!==s&&(this.weights=o(this.weights,s))}train(){for(let t=0;t<500;t++)if(this.updateWeights2(),this.weightsList.push(this.weights),t%2==1&&t>this.points.length/2){let t=this.weightsList[this.weightsList.length-2],e=a(this.weights,t)**2/(a(this.weights,this.weights)*a(t,t));if(e<1/.995&&e>.995)break}for(let t of this.weightsList)this.errList.push(this.err(t))}predict(t,e){return Math.sign(a(e,t[0]))}err(t){let e=0;for(let i of this.points)this.predict(i,t)!==i[1]&&e++;return(e/this.points.length).toFixed(3)}}let c=10,f=60,d=440-f-30,g=330-c-30;function m(t){let e=d3.select(t).append("svg").attr("viewBox","0 -20 440 400").attr("preserveAspectRatio","xMidYMid meet").append("g").attr("transform","translate("+f+","+c+")"),i=d3.scaleLinear().domain([0,1]).range([0,d]);e.append("g").attr("transform","translate(0,"+g+")").call(d3.axisBottom(i));let s=d3.scaleLinear().domain([0,1]).range([g,0]);return e.append("g").call(d3.axisLeft(s)),function(t,e,i){let s=t.append("g").attr("class","graphText").attr("transform","translate(0,"+(g+50)+")");s.append("text").attr("class","trueSlope").text("True slope: "),s.append("text").attr("class","learnedSlope").attr("transform","translate(0,25)").text("Learned slope: "),s.append("text").attr("class","iteration").attr("transform","translate(210,0)").text("Iteration: "),s.append("text").attr("class","error").attr("transform","translate(210,25)").text("Error: ")}(e),[e,i,s]}function x(t,e){t.select(".trueSlope").text("True slope: "+e),t.select(".learnedSlope").text("Learned slope: "),t.select(".iteration").text("Iteration: "),t.select(".error").text("Error: ")}function w(t,e,i){t.selectAll("line").remove(),t.append("line").attr("x1",e(0)).attr("y1",i(0)).attr("x2",e(1)).attr("y2",i(0)).attr("class","hyperplane")}function L(t,e,i,s){t.selectAll("circle").remove(),t.append("g").selectAll("circle").data(e).enter().append("circle").attr("cx",(function(t){return i(t[0][0])})).attr("cy",(function(t){return s(t[0][1])})).attr("r",3).attr("id",(function(t){return"c"+t[0][0].toString().replace(".","")+t[0][1].toString().replace(".","")})).style("fill",(function(t){return 1==t[1]?"#EE5C42":"#0198E1"}))}function v(t,e,i,s,n,r,o){let a=window.timeUnit,h=o.weightsList,l=h[r],u=-l[0]/l[1];i.text("Learned slope: "+u.toFixed(3)+" Iteration: "+(r+1)+"/"+h.length);let c="#c"+o.pointsList[r][0].toString().replace(".","")+o.pointsList[r][1].toString().replace(".",""),f=1;u>1&&(f=1/u),t.select(".error").transition().duration(10).text("Error: "+o.errList[r]).end().then(()=>{t.select(".iteration").transition().duration(10).text("Iteration: "+(r+1)+"/"+h.length).end().then(()=>{t.select(".learnedSlope").transition().duration(10).text(()=>"Learned slope: "+u.toFixed(3)).end().then(()=>{t.select(c).transition().delay(2*a).duration(3*a).attr("r",10).style("fill",(function(t){return 1==t[1]?"#af351f":"#105377"})).end().then(()=>{t.select(e).transition().duration(10*a).attr("x2",s(f)).attr("y2",n(u*f)).style("opacity",(function(t){return u<0?.2:.9})).end().then(()=>{t.select(c).transition().duration(5*a).attr("r",3).style("fill",(function(t){return 1==t[1]?"#EE5C42":"#0198E1"})).end().then(()=>{o instanceof p&&function(t,e,i,s,n,r,o){if(s>0){let a=e.votesList[o];t.append("line").style("stroke","#7e7e7e").attr("x1",0).attr("y1",g).attr("x2",n(i)).attr("y2",r(s*i)).style("stroke",(function(t){return d3.interpolateLab("white","black")(a/e.maxVote)})).style("stroke-width",(function(t){return 1+a/e.maxVote})).style("opacity",(function(t){return.75})).on("mouseenter",(function(t){d3.select(this).attr("class","selectedLine"),d3.select(this.parentNode).append("text").attr("class","vpText").attr("x",10).attr("y",-10).text((function(t){return"Votes: "+a}))})).on("mouseout",(function(){d3.selectAll(".vpText").remove(),d3.select(this).style("stroke",(function(t){return d3.interpolateLab("#d9d9d9","black")(a/e.maxVote)})).attr("class","")}))}}(t,o,f,u,s,n,r),r+1<h.length&&v(t,e,i,s,n,r+1,o)})})})})})})}let y=[],M=[],b=["#scatterplot0","#scatterplot1","#scatterplot2","#scatterplot3"];for(let t of b)M.push(m(t));function S(t,e){let i=parseInt(t.attr("max")),s=parseInt(t.attr("min"));return e<=i&&e>=s}function k(t,e){let[i,s,n]=M[e];y[e].train(),v(i,".hyperplane",t.find(".predSlope"),s,n,0,y[e])}$((function(){$(".slider").each((function(t){let e=$(this).val();$(this).siblings(".input-value").text(e)})),window.timeUnit=$(".animationSpeed").val(),$(".slider").on("input",(function(){let t=$(this).val();$(this).siblings(".input-value").text(t)})),$(".animationSpeed").on("input",(function(){let t=$(this).val();window.timeUnit=t})),$("#generate0").click((function(){let t=$(this).parents(".graph"),[e,i,s]=M[0],r=t.find(".numPoints"),o=r.val();if(S(r,o)){let[t,r]=n(o);w(e,i,s),x(e,t),L(e,r,i,s),y[0]=new l(r)}})),$("#fit0").click((function(){k($(this).parents(".graph"),0)})),$("#generate1").click((function(){let t=$(this).parents(".graph"),[e,i,s]=M[1],r=t.find(".numPoints"),o=r.val();if(S(r,o)){let r=(100-t.find(".margin").val())/100,[a,h]=n(o,r);w(e,i,s),x(e,a),L(e,h,i,s),y[1]=new l(h)}})),$("#fit1").click((function(){k($(this).parents(".graph"),1)})),$("#generate2").click((function(){let t=$(this).parents(".graph"),[e,i,s]=M[2],o=t.find(".numPoints"),a=o.val();if(S(o,a)){let[o,h]=n(a);r(h,t.find(".noise").val()/100),w(e,i,s),x(e,o),L(e,h,i,s),y[2]=new u(h)}})),$("#fit2").click((function(){k($(this).parents(".graph"),2)})),$("#generate3").click((function(){let t=$(this).parents(".graph"),[e,i,s]=M[3],o=t.find(".numPoints"),a=o.val(),h=t.find(".iters").val();if(S(o,a)){let[o,l]=n(a);r(l,t.find(".noise").val()/100),w(e,i,s),x(e,o),L(e,l,i,s),y[3]=new p(l,h)}})),$("#fit3").click((function(){k($(this).parents(".graph"),3)}))}))}]);